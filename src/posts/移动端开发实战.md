---
title: "移动端开发实战"
excerpt: "深入学习移动端开发技术，掌握响应式设计和原生应用开发技能。"
author: "CodeBuddy"
category: "移动开发"
tags: ["移动开发", "响应式设计", "React Native", "Flutter"]
publishedAt: "2024-08-29"
updatedAt: "2024-08-29"
readTime: 29
coverImage: "https://images.unsplash.com/photo-1512941937669-90a1b58e7e9c?w=800&h=400&fit=crop"
isPublished: true
---

# 移动端开发实战

移动端开发是现代应用开发的重要组成部分，涉及响应式Web设计、原生应用开发、跨平台解决方案等多个方面。本文将深入探讨移动端开发的核心技术和最佳实践。

## 响应式设计基础

### CSS媒体查询

```css
/* 移动优先的响应式设计 */
/* 基础样式（移动端） */
.container {
    width: 100%;
    padding: 0 16px;
    margin: 0 auto;
}

.grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 16px;
}

.card {
    background: #fff;
    border-radius: 8px;
    padding: 16px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

/* 平板端样式 */
@media (min-width: 768px) {
    .container {
        max-width: 768px;
        padding: 0 24px;
    }
    
    .grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 24px;
    }
    
    .card {
        padding: 24px;
    }
}

/* 桌面端样式 */
@media (min-width: 1024px) {
    .container {
        max-width: 1200px;
        padding: 0 32px;
    }
    
    .grid {
        grid-template-columns: repeat(3, 1fr);
        gap: 32px;
    }
}

/* 大屏幕样式 */
@media (min-width: 1440px) {
    .container {
        max-width: 1440px;
    }
    
    .grid {
        grid-template-columns: repeat(4, 1fr);
    }
}

/* 高分辨率屏幕适配 */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    .logo {
        background-image: url('logo@2x.png');
        background-size: 100px 50px;
    }
}

/* 横屏适配 */
@media (orientation: landscape) and (max-height: 500px) {
    .header {
        height: 50px;
    }
    
    .navigation {
        display: flex;
        flex-direction: row;
    }
}

/* 暗色模式适配 */
@media (prefers-color-scheme: dark) {
    :root {
        --bg-color: #1a1a1a;
        --text-color: #ffffff;
        --card-bg: #2d2d2d;
    }
    
    body {
        background-color: var(--bg-color);
        color: var(--text-color);
    }
    
    .card {
        background-color: var(--card-bg);
    }
}

/* 减少动画偏好 */
@media (prefers-reduced-motion: reduce) {
    * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}
```

### Flexbox 和 Grid 布局

```css
/* Flexbox 响应式布局 */
.flex-container {
    display: flex;
    flex-wrap: wrap;
    gap: 16px;
    padding: 16px;
}

.flex-item {
    flex: 1 1 300px; /* 最小宽度300px，可伸缩 */
    min-width: 0; /* 防止内容溢出 */
}

/* 响应式导航 */
.navbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 16px;
    height: 60px;
}

.nav-menu {
    display: flex;
    list-style: none;
    margin: 0;
    padding: 0;
    gap: 24px;
}

.nav-toggle {
    display: none;
    background: none;
    border: none;
    font-size: 24px;
    cursor: pointer;
}

@media (max-width: 767px) {
    .nav-menu {
        position: fixed;
        top: 60px;
        left: -100%;
        width: 100%;
        height: calc(100vh - 60px);
        background-color: #fff;
        flex-direction: column;
        justify-content: flex-start;
        align-items: center;
        padding-top: 40px;
        transition: left 0.3s ease;
        z-index: 1000;
    }
    
    .nav-menu.active {
        left: 0;
    }
    
    .nav-toggle {
        display: block;
    }
}

/* Grid 响应式布局 */
.grid-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 20px;
    padding: 20px;
}

/* 复杂的Grid布局 */
.layout-grid {
    display: grid;
    grid-template-areas: 
        "header header"
        "sidebar main"
        "footer footer";
    grid-template-rows: auto 1fr auto;
    grid-template-columns: 250px 1fr;
    min-height: 100vh;
    gap: 20px;
}

.header { grid-area: header; }
.sidebar { grid-area: sidebar; }
.main { grid-area: main; }
.footer { grid-area: footer; }

@media (max-width: 768px) {
    .layout-grid {
        grid-template-areas: 
            "header"
            "main"
            "sidebar"
            "footer";
        grid-template-columns: 1fr;
    }
}
```

## React Native 开发

### 基础组件和导航

```javascript
// App.js - 主应用组件
import React from 'react';
import { NavigationContainer } from '@react-navigation/native';
import { createStackNavigator } from '@react-navigation/stack';
import { createBottomTabNavigator } from '@react-navigation/bottom-tabs';
import { Provider } from 'react-redux';
import { store } from './src/store';

import HomeScreen from './src/screens/HomeScreen';
import ProfileScreen from './src/screens/ProfileScreen';
import SettingsScreen from './src/screens/SettingsScreen';
import LoginScreen from './src/screens/LoginScreen';

const Stack = createStackNavigator();
const Tab = createBottomTabNavigator();

function TabNavigator() {
  return (
    <Tab.Navigator
      screenOptions={{
        tabBarActiveTintColor: '#007AFF',
        tabBarInactiveTintColor: '#8E8E93',
        tabBarStyle: {
          backgroundColor: '#F8F8F8',
          borderTopWidth: 1,
          borderTopColor: '#E5E5EA',
        },
      }}
    >
      <Tab.Screen 
        name="Home" 
        component={HomeScreen}
        options={{
          tabBarIcon: ({ color, size }) => (
            <Icon name="home" size={size} color={color} />
          ),
        }}
      />
      <Tab.Screen 
        name="Profile" 
        component={ProfileScreen}
        options={{
          tabBarIcon: ({ color, size }) => (
            <Icon name="person" size={size} color={color} />
          ),
        }}
      />
      <Tab.Screen 
        name="Settings" 
        component={SettingsScreen}
        options={{
          tabBarIcon: ({ color, size }) => (
            <Icon name="settings" size={size} color={color} />
          ),
        }}
      />
    </Tab.Navigator>
  );
}

export default function App() {
  return (
    <Provider store={store}>
      <NavigationContainer>
        <Stack.Navigator initialRouteName="Login">
          <Stack.Screen 
            name="Login" 
            component={LoginScreen}
            options={{ headerShown: false }}
          />
          <Stack.Screen 
            name="Main" 
            component={TabNavigator}
            options={{ headerShown: false }}
          />
        </Stack.Navigator>
      </NavigationContainer>
    </Provider>
  );
}

// HomeScreen.js - 首页组件
import React, { useState, useEffect } from 'react';
import {
  View,
  Text,
  StyleSheet,
  FlatList,
  RefreshControl,
  TouchableOpacity,
  Image,
  Alert,
} from 'react-native';
import { useSelector, useDispatch } from 'react-redux';
import { fetchPosts } from '../store/slices/postsSlice';

const HomeScreen = ({ navigation }) => {
  const dispatch = useDispatch();
  const { posts, loading, error } = useSelector(state => state.posts);
  const [refreshing, setRefreshing] = useState(false);

  useEffect(() => {
    dispatch(fetchPosts());
  }, [dispatch]);

  const onRefresh = async () => {
    setRefreshing(true);
    await dispatch(fetchPosts());
    setRefreshing(false);
  };

  const renderPost = ({ item }) => (
    <TouchableOpacity
      style={styles.postCard}
      onPress={() => navigation.navigate('PostDetail', { postId: item.id })}
    >
      <Image source={{ uri: item.imageUrl }} style={styles.postImage} />
      <View style={styles.postContent}>
        <Text style={styles.postTitle}>{item.title}</Text>
        <Text style={styles.postExcerpt} numberOfLines={2}>
          {item.excerpt}
        </Text>
        <View style={styles.postMeta}>
          <Text style={styles.postAuthor}>{item.author}</Text>
          <Text style={styles.postDate}>{item.publishedAt}</Text>
        </View>
      </View>
    </TouchableOpacity>
  );

  if (error) {
    return (
      <View style={styles.errorContainer}>
        <Text style={styles.errorText}>加载失败</Text>
        <TouchableOpacity 
          style={styles.retryButton}
          onPress={() => dispatch(fetchPosts())}
        >
          <Text style={styles.retryText}>重试</Text>
        </TouchableOpacity>
      </View>
    );
  }

  return (
    <View style={styles.container}>
      <FlatList
        data={posts}
        renderItem={renderPost}
        keyExtractor={item => item.id.toString()}
        refreshControl={
          <RefreshControl refreshing={refreshing} onRefresh={onRefresh} />
        }
        showsVerticalScrollIndicator={false}
        contentContainerStyle={styles.listContainer}
      />
    </View>
  );
};

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#F8F8F8',
  },
  listContainer: {
    padding: 16,
  },
  postCard: {
    backgroundColor: '#FFFFFF',
    borderRadius: 12,
    marginBottom: 16,
    shadowColor: '#000',
    shadowOffset: {
      width: 0,
      height: 2,
    },
    shadowOpacity: 0.1,
    shadowRadius: 4,
    elevation: 3,
  },
  postImage: {
    width: '100%',
    height: 200,
    borderTopLeftRadius: 12,
    borderTopRightRadius: 12,
  },
  postContent: {
    padding: 16,
  },
  postTitle: {
    fontSize: 18,
    fontWeight: 'bold',
    color: '#1C1C1E',
    marginBottom: 8,
  },
  postExcerpt: {
    fontSize: 14,
    color: '#8E8E93',
    lineHeight: 20,
    marginBottom: 12,
  },
  postMeta: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
  },
  postAuthor: {
    fontSize: 12,
    color: '#007AFF',
    fontWeight: '500',
  },
  postDate: {
    fontSize: 12,
    color: '#8E8E93',
  },
  errorContainer: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
    padding: 20,
  },
  errorText: {
    fontSize: 16,
    color: '#FF3B30',
    marginBottom: 16,
  },
  retryButton: {
    backgroundColor: '#007AFF',
    paddingHorizontal: 20,
    paddingVertical: 10,
    borderRadius: 8,
  },
  retryText: {
    color: '#FFFFFF',
    fontSize: 16,
    fontWeight: '500',
  },
});

export default HomeScreen;
```

### 状态管理和API集成

```javascript
// store/index.js - Redux store配置
import { configureStore } from '@reduxjs/toolkit';
import authSlice from './slices/authSlice';
import postsSlice from './slices/postsSlice';
import userSlice from './slices/userSlice';

export const store = configureStore({
  reducer: {
    auth: authSlice,
    posts: postsSlice,
    user: userSlice,
  },
  middleware: (getDefaultMiddleware) =>
    getDefaultMiddleware({
      serializableCheck: {
        ignoredActions: ['persist/PERSIST'],
      },
    }),
});

// store/slices/authSlice.js - 认证状态管理
import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';
import AsyncStorage from '@react-native-async-storage/async-storage';
import { authAPI } from '../../services/api';

// 异步登录操作
export const login = createAsyncThunk(
  'auth/login',
  async ({ email, password }, { rejectWithValue }) => {
    try {
      const response = await authAPI.login(email, password);
      
      // 保存token到本地存储
      await AsyncStorage.setItem('token', response.token);
      await AsyncStorage.setItem('refreshToken', response.refreshToken);
      
      return response;
    } catch (error) {
      return rejectWithValue(error.response?.data?.message || '登录失败');
    }
  }
);

// 异步登出操作
export const logout = createAsyncThunk(
  'auth/logout',
  async (_, { rejectWithValue }) => {
    try {
      await authAPI.logout();
      
      // 清除本地存储
      await AsyncStorage.multiRemove(['token', 'refreshToken', 'user']);
      
      return null;
    } catch (error) {
      return rejectWithValue(error.response?.data?.message || '登出失败');
    }
  }
);

// 检查认证状态
export const checkAuthStatus = createAsyncThunk(
  'auth/checkStatus',
  async (_, { rejectWithValue }) => {
    try {
      const token = await AsyncStorage.getItem('token');
      
      if (!token) {
        throw new Error('No token found');
      }
      
      const response = await authAPI.verifyToken(token);
      return response;
    } catch (error) {
      await AsyncStorage.multiRemove(['token', 'refreshToken', 'user']);
      return rejectWithValue('Token invalid');
    }
  }
);

const authSlice = createSlice({
  name: 'auth',
  initialState: {
    user: null,
    token: null,
    isAuthenticated: false,
    loading: false,
    error: null,
  },
  reducers: {
    clearError: (state) => {
      state.error = null;
    },
    setCredentials: (state, action) => {
      state.user = action.payload.user;
      state.token = action.payload.token;
      state.isAuthenticated = true;
    },
  },
  extraReducers: (builder) => {
    builder
      // 登录
      .addCase(login.pending, (state) => {
        state.loading = true;
        state.error = null;
      })
      .addCase(login.fulfilled, (state, action) => {
        state.loading = false;
        state.user = action.payload.user;
        state.token = action.payload.token;
        state.isAuthenticated = true;
      })
      .addCase(login.rejected, (state, action) => {
        state.loading = false;
        state.error = action.payload;
        state.isAuthenticated = false;
      })
      // 登出
      .addCase(logout.fulfilled, (state) => {
        state.user = null;
        state.token = null;
        state.isAuthenticated = false;
        state.error = null;
      })
      // 检查认证状态
      .addCase(checkAuthStatus.fulfilled, (state, action) => {
        state.user = action.payload.user;
        state.isAuthenticated = true;
      })
      .addCase(checkAuthStatus.rejected, (state) => {
        state.user = null;
        state.token = null;
        state.isAuthenticated = false;
      });
  },
});

export const { clearError, setCredentials } = authSlice.actions;
export default authSlice.reducer;

// services/api.js - API服务
import axios from 'axios';
import AsyncStorage from '@react-native-async-storage/async-storage';

const API_BASE_URL = 'https://api.example.com';

// 创建axios实例
const apiClient = axios.create({
  baseURL: API_BASE_URL,
  timeout: 10000,
  headers: {
    'Content-Type': 'application/json',
  },
});

// 请求拦截器 - 添加认证token
apiClient.interceptors.request.use(
  async (config) => {
    const token = await AsyncStorage.getItem('token');
    if (token) {
      config.headers.Authorization = `Bearer ${token}`;
    }
    return config;
  },
  (error) => {
    return Promise.reject(error);
  }
);

// 响应拦截器 - 处理token刷新
apiClient.interceptors.response.use(
  (response) => response,
  async (error) => {
    const originalRequest = error.config;
    
    if (error.response?.status === 401 && !originalRequest._retry) {
      originalRequest._retry = true;
      
      try {
        const refreshToken = await AsyncStorage.getItem('refreshToken');
        const response = await axios.post(`${API_BASE_URL}/auth/refresh`, {
          refreshToken,
        });
        
        const { token } = response.data;
        await AsyncStorage.setItem('token', token);
        
        originalRequest.headers.Authorization = `Bearer ${token}`;
        return apiClient(originalRequest);
      } catch (refreshError) {
        // 刷新失败，清除存储并跳转到登录页
        await AsyncStorage.multiRemove(['token', 'refreshToken', 'user']);
        // 这里可以发送一个全局事件来处理登出
        return Promise.reject(refreshError);
      }
    }
    
    return Promise.reject(error);
  }
);

// API方法
export const authAPI = {
  login: (email, password) =>
    apiClient.post('/auth/login', { email, password }).then(res => res.data),
  
  logout: () =>
    apiClient.post('/auth/logout').then(res => res.data),
  
  register: (userData) =>
    apiClient.post('/auth/register', userData).then(res => res.data),
  
  verifyToken: (token) =>
    apiClient.get('/auth/verify', {
      headers: { Authorization: `Bearer ${token}` }
    }).then(res => res.data),
};

export const postsAPI = {
  getPosts: (page = 1, limit = 10) =>
    apiClient.get(`/posts?page=${page}&limit=${limit}`).then(res => res.data),
  
  getPost: (id) =>
    apiClient.get(`/posts/${id}`).then(res => res.data),
  
  createPost: (postData) =>
    apiClient.post('/posts', postData).then(res => res.data),
  
  updatePost: (id, postData) =>
    apiClient.put(`/posts/${id}`, postData).then(res => res.data),
  
  deletePost: (id) =>
    apiClient.delete(`/posts/${id}`).then(res => res.data),
};

export default apiClient;
```

## Flutter 开发

### 基础Widget和布局

```dart
// main.dart - Flutter应用入口
import 'package:flutter/material.dart';
import 'package:provider/provider.dart';
import 'package:flutter_localizations/flutter_localizations.dart';

import 'providers/auth_provider.dart';
import 'providers/posts_provider.dart';
import 'screens/splash_screen.dart';
import 'screens/login_screen.dart';
import 'screens/home_screen.dart';
import 'utils/theme.dart';

void main() {
  runApp(MyApp());
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MultiProvider(
      providers: [
        ChangeNotifierProvider(create: (_) => AuthProvider()),
        ChangeNotifierProvider(create: (_) => PostsProvider()),
      ],
      child: Consumer<AuthProvider>(
        builder: (context, authProvider, _) {
          return MaterialApp(
            title: 'Flutter Demo',
            theme: AppTheme.lightTheme,
            darkTheme: AppTheme.darkTheme,
            themeMode: ThemeMode.system,
            localizationsDelegates: [
              GlobalMaterialLocalizations.delegate,
              GlobalWidgetsLocalizations.delegate,
              GlobalCupertinoLocalizations.delegate,
            ],
            supportedLocales: [
              Locale('en', ''),
              Locale('zh', ''),
            ],
            home: authProvider.isLoading
                ? SplashScreen()
                : authProvider.isAuthenticated
                    ? HomeScreen()
                    : LoginScreen(),
            routes: {
              '/login': (context) => LoginScreen(),
              '/home': (context) => HomeScreen(),
            },
          );
        },
      ),
    );
  }
}

// screens/home_screen.dart - 首页
import 'package:flutter/material.dart';
import 'package:provider/provider.dart';
import '../providers/posts_provider.dart';
import '../widgets/post_card.dart';
import '../widgets/loading_indicator.dart';

class HomeScreen extends StatefulWidget {
  @override
  _HomeScreenState createState() => _HomeScreenState();
}

class _HomeScreenState extends State<HomeScreen> {
  final ScrollController _scrollController = ScrollController();
  
  @override
  void initState() {
    super.initState();
    
    // 初始化数据
    WidgetsBinding.instance.addPostFrameCallback((_) {
      Provider.of<PostsProvider>(context, listen: false).fetchPosts();
    });
    
    // 监听滚动事件实现无限滚动
    _scrollController.addListener(_onScroll);
  }
  
  void _onScroll() {
    if (_scrollController.position.pixels ==
        _scrollController.position.maxScrollExtent) {
      Provider.of<PostsProvider>(context, listen: false).loadMorePosts();
    }
  }
  
  @override
  void dispose() {
    _scrollController.dispose();
    super.dispose();
  }
  
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('首页'),
        elevation: 0,
        actions: [
          IconButton(
            icon: Icon(Icons.search),
            onPressed: () {
              // 实现搜索功能
              showSearch(
                context: context,
                delegate: PostSearchDelegate(),
              );
            },
          ),
          IconButton(
            icon: Icon(Icons.notifications),
            onPressed: () {
              // 跳转到通知页面
            },
          ),
        ],
      ),
      body: Consumer<PostsProvider>(
        builder: (context, postsProvider, child) {
          if (postsProvider.isLoading && postsProvider.posts.isEmpty) {
            return LoadingIndicator();
          }
          
          if (postsProvider.error != null && postsProvider.posts.isEmpty) {
            return _buildErrorWidget(postsProvider.error!);
          }
          
          return RefreshIndicator(
            onRefresh: () => postsProvider.refreshPosts(),
            child: ListView.builder(
              controller: _scrollController,
              padding: EdgeInsets.all(16),
              itemCount: postsProvider.posts.length + 
                         (postsProvider.hasMore ? 1 : 0),
              itemBuilder: (context, index) {
                if (index == postsProvider.posts.length) {
                  return LoadingIndicator();
                }
                
                final post = postsProvider.posts[index];
                return PostCard(
                  post: post,
                  onTap: () {
                    Navigator.pushNamed(
                      context,
                      '/post-detail',
                      arguments: post.id,
                    );
                  },
                );
              },
            ),
          );
        },
      ),
      floatingActionButton: FloatingActionButton(
        onPressed: () {
          Navigator.pushNamed(context, '/create-post');
        },
        child: Icon(Icons.add),
      ),
    );
  }
  
  Widget _buildErrorWidget(String error) {
    return Center(
      child: Column(
        mainAxisAlignment: MainAxisAlignment.center,
        children: [
          Icon(
            Icons.error_outline,
            size: 64,
            color: Colors.grey,
          ),
          SizedBox(height: 16),
          Text(
            '加载失败',
            style: Theme.of(context).textTheme.headline6,
          ),
          SizedBox(height: 8),
          Text(
            error,
            style: Theme.of(context).textTheme.bodyText2,
            textAlign: TextAlign.center,
          ),
          SizedBox(height: 16),
          ElevatedButton(
            onPressed: () {
              Provider.of<PostsProvider>(context, listen: false).fetchPosts();
            },
            child: Text('重试'),
          ),
        ],
      ),
    );
  }
}

// widgets/post_card.dart - 文章卡片组件
import 'package:flutter/material.dart';
import 'package:cached_network_image/cached_network_image.dart';
import '../models/post.dart';

class PostCard extends StatelessWidget {
  final Post post;
  final VoidCallback? onTap;
  
  const PostCard({
    Key? key,
    required this.post,
    this.onTap,
  }) : super(key: key);
  
  @override
  Widget build(BuildContext context) {
    return Card(
      margin: EdgeInsets.only(bottom: 16),
      elevation: 2,
      shape: RoundedRectangleBorder(
        borderRadius: BorderRadius.circular(12),
      ),
      child: InkWell(
        onTap: onTap,
        borderRadius: BorderRadius.circular(12),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            // 图片
            ClipRRect(
              borderRadius: BorderRadius.vertical(top: Radius.circular(12)),
              child: CachedNetworkImage(
                imageUrl: post.imageUrl,
                height: 200,
                width: double.infinity,
                fit: BoxFit.cover,
                placeholder: (context, url) => Container(
                  height: 200,
                  color: Colors.grey[300],
                  child: Center(
                    child: CircularProgressIndicator(),
                  ),
                ),
                errorWidget: (context, url, error) => Container(
                  height: 200,
                  color: Colors.grey[300],
                  child: Icon(
                    Icons.error,
                    color: Colors.grey[600],
                  ),
                ),
              ),
            ),
            
            // 内容
            Padding(
              padding: EdgeInsets.all(16),
              child: Column(
                crossAxisAlignment: CrossAxisAlignment.start,
                children: [
                  // 标题
                  Text(
                    post.title,
                    style: Theme.of(context).textTheme.headline6?.copyWith(
                      fontWeight: FontWeight.bold,
                    ),
                    maxLines: 2,
                    overflow: TextOverflow.ellipsis,
                  ),
                  
                  SizedBox(height: 8),
                  
                  // 摘要
                  Text(
                    post.excerpt,
                    style: Theme.of(context).textTheme.bodyText2?.copyWith(
                      color: Colors.grey[600],
                    ),
                    maxLines: 3,
                    overflow: TextOverflow.ellipsis,
                  ),
                  
                  SizedBox(height: 12),
                  
                  // 元信息
                  Row(
                    children: [
                      CircleAvatar(
                        radius: 12,
                        backgroundImage: NetworkImage(post.authorAvatar),
                      ),
                      SizedBox(width: 8),
                      Text(
                        post.author,
                        style: Theme.of(context).textTheme.caption?.copyWith(
                          color: Theme.of(context).primaryColor,
                          fontWeight: FontWeight.w500,
                        ),
                      ),
                      Spacer(),
                      Text(
                        _formatDate(post.publishedAt),
                        style: Theme.of(context).textTheme.caption?.copyWith(
                          color: Colors.grey[600],
                        ),
                      ),
                    ],
                  ),
                  
                  SizedBox(height: 8),
                  
                  // 标签
                  Wrap(
                    spacing: 8,
                    children: post.tags.take(3).map((tag) {
                      return Chip(
                        label: Text(
                          tag,
                          style: TextStyle(fontSize: 12),
                        ),
                        backgroundColor: Theme.of(context).primaryColor.withOpacity(0.1),
                        labelStyle: TextStyle(
                          color: Theme.of(context).primaryColor,
                        ),
                      );
                    }).toList(),
                  ),
                ],
              ),
            ),
          ],
        ),
      ),
    );
  }
  
  String _formatDate(DateTime date) {
    final now = DateTime.now();
    final difference = now.difference(date);
    
    if (difference.inDays > 0) {
      return '${difference.inDays}天前';
    } else if (difference.inHours > 0) {
      return '${difference.inHours}小时前';
    } else if (difference.inMinutes > 0) {
      return '${difference.inMinutes}分钟前';
    } else {
      return '刚刚';
    }
  }
}
```

### 状态管理和网络请求

```dart
// providers/posts_provider.dart - 文章状态管理
import 'package:flutter/foundation.dart';
import '../models/post.dart';
import '../services/api_service.dart';

class PostsProvider with ChangeNotifier {
  List<Post> _posts = [];
  bool _isLoading = false;
  String? _error;
  int _currentPage = 1;
  bool _hasMore = true;
  
  List<Post> get posts => _posts;
  bool get isLoading => _isLoading;
  String? get error => _error;
  bool get hasMore => _hasMore;
  
  final ApiService _apiService = ApiService();
  
  Future<void> fetchPosts() async {
    _isLoading = true;
    _error = null;
    _currentPage = 1;
    notifyListeners();
    
    try {
      final response = await _apiService.getPosts(page: _currentPage);
      _posts = response.posts;
      _hasMore = response.hasMore;
      _currentPage++;
    } catch (e) {
      _error = e.toString();
    } finally {
      _isLoading = false;
      notifyListeners();
    }
  }
  
  Future<void> loadMorePosts() async {
    if (_isLoading || !_hasMore) return;
    
    _isLoading = true;
    notifyListeners();
    
    try {
      final response = await _apiService.getPosts(page: _currentPage);
      _posts.addAll(response.posts);
      _hasMore = response.hasMore;
      _currentPage++;
    } catch (e) {
      _error = e.toString();
    } finally {
      _isLoading = false;
      notifyListeners();
    }
  }
  
  Future<void> refreshPosts() async {
    await fetchPosts();
  }
  
  Future<void> createPost(Post post) async {
    try {
      final newPost = await _apiService.createPost(post);
      _posts.insert(0, newPost);
      notifyListeners();
    } catch (e) {
      throw e;
    }
  }
  
  Future<void> updatePost(Post post) async {
    try {
      final updatedPost = await _apiService.updatePost(post);
      final index = _posts.indexWhere((p) => p.id == post.id);
      if (index != -1) {
        _posts[index] = updatedPost;
        notifyListeners();
      }
    } catch (e) {
      throw e;
    }
  }
  
  Future<void> deletePost(String postId) async {
    try {
      await _apiService.deletePost(postId);
      _posts.removeWhere((post) => post.id == postId);
      notifyListeners();
    } catch (e) {
      throw e;
    }
  }
}

// services/api_service.dart - API服务
import 'dart:convert';
import 'package:http/http.dart' as http;
import '../models/post.dart';
import '../models/api_response.dart';
import '../utils/storage.dart';

class ApiService {
  static const String baseUrl = 'https://api.example.com';
  
  Future<Map<String, String>> _getHeaders() async {
    final token = await Storage.getToken();
    return {
      'Content-Type': 'application/json',
      if (token != null) 'Authorization': 'Bearer $token',
    };
  }
  
  Future<PostsResponse> getPosts({int page = 1, int limit = 10}) async {
    final headers = await _getHeaders();
    final response = await http.get(
      Uri.parse('$baseUrl/posts?page=$page&limit=$limit'),
      headers: headers,
    );
    
    if (response.statusCode == 200) {
      final data = json.decode(response.body);
      return PostsResponse.fromJson(data);
    } else {
      throw Exception('Failed to load posts');
    }
  }
  
  Future<Post> getPost(String id) async {
    final headers = await _getHeaders();
    final response = await http.get(
      Uri.parse('$baseUrl/posts/$id'),
      headers: headers,
    );
    
    if (response.statusCode == 200) {
      final data = json.decode(response.body);
      return Post.fromJson(data);
    } else {
      throw Exception('Failed to load post');
    }
  }
  
  Future<Post> createPost(Post post) async {
    final headers = await _getHeaders();
    final response = await http.post(
      Uri.parse('$baseUrl/posts'),
      headers: headers,
      body: json.encode(post.toJson()),
    );
    
    if (response.statusCode == 201) {
      final data = json.decode(response.body);
      return Post.fromJson(data);
    } else {
      throw Exception('Failed to create post');
    }
  }
  
  Future<Post> updatePost(Post post) async {
    final headers = await _getHeaders();
    final response = await http.put(
      Uri.parse('$baseUrl/posts/${post.id}'),
      headers: headers,
      body: json.encode(post.toJson()),
    );
    
    if (response.statusCode == 200) {
      final data = json.decode(response.body);
      return Post.fromJson(data);
    } else {
      throw Exception('Failed to update post');
    }
  }
  
  Future<void> deletePost(String id) async {
    final headers = await _getHeaders();
    final response = await http.delete(
      Uri.parse('$baseUrl/posts/$id'),
      headers: headers,
    );
    
    if (response.statusCode != 200) {
      throw Exception('Failed to delete post');
    }
  }
}

// models/post.dart - 文章模型
class Post {
  final String id;
  final String title;
  final String content;
  final String excerpt;
  final String imageUrl;
  final String author;
  final String authorAvatar;
  final DateTime publishedAt;
  final List<String> tags;
  final int viewCount;
  final int likeCount;
  
  Post({
    required this.id,
    required this.title,
    required this.content,
    required this.excerpt,
    required this.imageUrl,
    required this.author,
    required this.authorAvatar,
    required this.publishedAt,
    required this.tags,
    this.viewCount = 0,
    this.likeCount = 0,
  });
  
  factory Post.fromJson(Map<String, dynamic> json) {
    return Post(
      id: json['id'],
      title: json['title'],
      content: json['content'],
      excerpt: json['excerpt'],
      imageUrl: json['imageUrl'],
      author: json['author'],
      authorAvatar: json['authorAvatar'],
      publishedAt: DateTime.parse(json['publishedAt']),
      tags: List<String>.from(json['tags']),
      viewCount: json['viewCount'] ?? 0,
      likeCount: json['likeCount'] ?? 0,
    );
  }
  
  Map<String, dynamic> toJson() {
    return {
      'id': id,
      'title': title,
      'content': content,
      'excerpt': excerpt,
      'imageUrl': imageUrl,
      'author': author,
      'authorAvatar': authorAvatar,
      'publishedAt': publishedAt.toIso8601String(),
      'tags': tags,
      'viewCount': viewCount,
      'likeCount': likeCount,
    };
  }
}

class PostsResponse {
  final List<Post> posts;
  final bool hasMore;
  final int total;
  
  PostsResponse({
    required this.posts,
    required this.hasMore,
    required this.total,
  });
  
  factory PostsResponse.fromJson(Map<String, dynamic> json) {
    return PostsResponse(
      posts: (json['posts'] as List)
          .map((post) => Post.fromJson(post))
          .toList(),
      hasMore: json['hasMore'],
      total: json['total'],
    );
  }
}
```

## 总结

移动端开发实战的核心要点：

1. **响应式设计** - 媒体查询、弹性布局、移动优先策略
2. **React Native** - 组件开发、导航管理、状态管理
3. **Flutter开发** - Widget系统、状态管理、网络请求
4. **性能优化** - 图片优化、懒加载、内存管理
5. **用户体验** - 手势交互、动画效果、离线支持
6. **跨平台方案** - 代码复用、平台适配、原生集成

掌握这些技术将让你能够开发出高质量的移动端应用。